import{b as Dt,a as q,f as re,t as Bt,c as Oe}from"../chunks/oF93Wzcm.js";import{o as qt,w as Gt}from"../chunks/C33Q1jX1.js";import{k as D,I as De,b0 as Vt,b as it,i as He,V as Ce,a1 as Ct,C as s,ac as jt,K as Jt,W as ft,a5 as Me,l as ce,J as Kt,aa as Pt,U as ut,d as we,b1 as te,j as rt,b2 as Yt,n as Xt,as as Zt,aP as Qt,a8 as nt,b3 as $t,b4 as er,ag as tr,H as dt,b5 as rr,e as Et,h as St,b6 as Ze,b7 as ar,a7 as ir,g as nr,a3 as sr,b8 as Tt,y as kt,b9 as or,x as Be,E as At,ba as lr,aH as fr,ad as st,F as Ve,bb as ur,bc as dr,bd as cr,af as Ie,be as vr,z as It,A as hr,bf as mr,aD as _r,bg as pr,D as Nt,aA as gr,aC as br,bh as wr,aL as yr,bi as xr,p as Rt,al as Cr,ax as Er,ah as K,aw as ct,f as ye,a as Mt,aM as ve,t as xe,s as V,r as B,aN as M,c as G,bj as vt}from"../chunks/kLHa-MXQ.js";import{a as Sr,b as Fe,s as Ue}from"../chunks/C5pnJeNa.js";import{B as zt}from"../chunks/Byn3yIQT.js";import{a as Tr,S as kr,s as Ar,b as Ir,T as Nr,r as Le,c as Rr}from"../chunks/CxbgeElo.js";import{g as Mr,c as zr,d as be,j as ht}from"../chunks/DzxQuzbj.js";import{p as L,b as Ot,r as Or,i as Qe,s as Fr,a as Lr}from"../chunks/CfninqCR.js";import{s as mt}from"../chunks/D6Q5_SLk.js";const Wr=Symbol("NaN");function Hr(e,t,r){D&&De();var o=new zt(e),v=!Vt();it(()=>{var a=t();a!==a&&(a=Wr),v&&a!==null&&typeof a=="object"&&(a={}),o.ensure(a,r)})}function Ur(e,t){return t}function Dr(e,t,r){for(var o=[],v=t.length,a,n=t.length,l=0;l<v;l++){let g=t[l];St(g,()=>{if(a){if(a.pending.delete(g),a.done.add(g),a.pending.size===0){var c=e.outrogroups;at(nt(a.done)),c.delete(a),c.size===0&&(e.outrogroups=null)}}else n-=1},!1)}if(n===0){var u=o.length===0&&r!==null;if(u){var f=r,d=f.parentNode;ir(d),d.append(f),e.items.clear()}at(t,!u)}else a={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(a)}function at(e,t=!0){for(var r=0;r<e.length;r++)nr(e[r],t)}var _t;function $e(e,t,r,o,v,a=null){var n=e,l=new Map,u=(t&Tt)!==0;if(u){var f=e;n=D?Ce(Ct(f)):f.appendChild(He())}D&&De();var d=null,g=Zt(()=>{var m=r();return Qt(m)?m:m==null?[]:nt(m)}),c,p=!0;function C(){i.fallback=d,Br(i,c,n,t,o),d!==null&&(c.length===0?(d.f&te)===0?Et(d):(d.f^=te,Re(d,null,n)):St(d,()=>{d=null}))}var S=it(()=>{c=s(g);var m=c.length;let x=!1;if(D){var E=jt(n)===Jt;E!==(m===0)&&(n=ft(),Ce(n),Me(!1),x=!0)}for(var I=new Set,A=we,N=Xt(),y=0;y<m;y+=1){D&&ce.nodeType===Kt&&ce.data===Pt&&(n=ce,x=!0,Me(!1));var z=c[y],R=o(z,y),k=p?null:l.get(R);k?(k.v&&ut(k.v,z),k.i&&ut(k.i,y),N&&A.unskip_effect(k.e)):(k=qr(l,p?n:_t??=He(),z,R,y,v,t,r),p||(k.e.f|=te),l.set(R,k)),I.add(R)}if(m===0&&a&&!d&&(p?d=rt(()=>a(n)):(d=rt(()=>a(_t??=He())),d.f|=te)),m>I.size&&Yt(),D&&m>0&&Ce(ft()),!p)if(N){for(const[$,oe]of l)I.has($)||A.skip_effect(oe.e);A.oncommit(C),A.ondiscard(()=>{})}else C();x&&Me(!0),s(g)}),i={effect:S,items:l,outrogroups:null,fallback:d};p=!1,D&&(n=ce)}function Ne(e){for(;e!==null&&(e.f&ar)===0;)e=e.next;return e}function Br(e,t,r,o,v){var a=(o&or)!==0,n=t.length,l=e.items,u=Ne(e.effect.first),f,d=null,g,c=[],p=[],C,S,i,m;if(a)for(m=0;m<n;m+=1)C=t[m],S=v(C,m),i=l.get(S).e,(i.f&te)===0&&(i.nodes?.a?.measure(),(g??=new Set).add(i));for(m=0;m<n;m+=1){if(C=t[m],S=v(C,m),i=l.get(S).e,e.outrogroups!==null)for(const k of e.outrogroups)k.pending.delete(i),k.done.delete(i);if((i.f&te)!==0)if(i.f^=te,i===u)Re(i,null,r);else{var x=d?d.next:u;i===e.effect.last&&(e.effect.last=i.prev),i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),se(e,d,i),se(e,i,x),Re(i,x,r),d=i,c=[],p=[],u=Ne(d.next);continue}if((i.f&Ze)!==0&&(Et(i),a&&(i.nodes?.a?.unfix(),(g??=new Set).delete(i))),i!==u){if(f!==void 0&&f.has(i)){if(c.length<p.length){var E=p[0],I;d=E.prev;var A=c[0],N=c[c.length-1];for(I=0;I<c.length;I+=1)Re(c[I],E,r);for(I=0;I<p.length;I+=1)f.delete(p[I]);se(e,A.prev,N.next),se(e,d,A),se(e,N,E),u=E,d=N,m-=1,c=[],p=[]}else f.delete(i),Re(i,u,r),se(e,i.prev,i.next),se(e,i,d===null?e.effect.first:d.next),se(e,d,i),d=i;continue}for(c=[],p=[];u!==null&&u!==i;)(f??=new Set).add(u),p.push(u),u=Ne(u.next);if(u===null)continue}(i.f&te)===0&&c.push(i),d=i,u=Ne(i.next)}if(e.outrogroups!==null){for(const k of e.outrogroups)k.pending.size===0&&(at(nt(k.done)),e.outrogroups?.delete(k));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||f!==void 0){var y=[];if(f!==void 0)for(i of f)(i.f&Ze)===0&&y.push(i);for(;u!==null;)(u.f&Ze)===0&&u!==e.fallback&&y.push(u),u=Ne(u.next);var z=y.length;if(z>0){var R=(o&Tt)!==0&&n===0?r:null;if(a){for(m=0;m<z;m+=1)y[m].nodes?.a?.measure();for(m=0;m<z;m+=1)y[m].nodes?.a?.fix()}Dr(e,y,R)}}a&&kt(()=>{if(g!==void 0)for(i of g)i.nodes?.a?.apply()})}function qr(e,t,r,o,v,a,n,l){var u=(n&$t)!==0?(n&er)===0?tr(r,!1,!1):dt(r):null,f=(n&rr)!==0?dt(v):null;return{v:u,i:f,e:rt(()=>(a(t,u??r,f??v,l),()=>{e.delete(o)}))}}function Re(e,t,r){if(e.nodes)for(var o=e.nodes.start,v=e.nodes.end,a=t&&(t.f&te)===0?t.nodes.start:r;o!==null;){var n=sr(o);if(a.before(o),o===v)return;o=n}}function se(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const Gr=()=>performance.now(),ee={tick:e=>requestAnimationFrame(e),now:()=>Gr(),tasks:new Set};function Ft(){const e=ee.now();ee.tasks.forEach(t=>{t.c(e)||(ee.tasks.delete(t),t.f())}),ee.tasks.size!==0&&ee.tick(Ft)}function Vr(e){let t;return ee.tasks.size===0&&ee.tick(Ft),{promise:new Promise(r=>{ee.tasks.add(t={c:e,f:r})}),abort(){ee.tasks.delete(t)}}}function qe(e,t){It(()=>{e.dispatchEvent(new CustomEvent(t))})}function jr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function pt(e){const t={},r=e.split(";");for(const o of r){const[v,a]=o.split(":");if(!v||a===void 0)break;const n=jr(v.trim());t[n]=a.trim()}return t}const Jr=e=>e;let Lt=null;function gt(e){Lt=e}function Kr(e,t,r){var o=Lt??Be,v=o.nodes,a,n,l,u=null;v.a??={element:e,measure(){a=this.element.getBoundingClientRect()},apply(){if(l?.abort(),n=this.element.getBoundingClientRect(),a.left!==n.left||a.right!==n.right||a.top!==n.top||a.bottom!==n.bottom){const f=t()(this.element,{from:a,to:n},r?.());l=Ge(this.element,f,void 0,1,()=>{l?.abort(),l=void 0})}},fix(){if(!e.getAnimations().length){var{position:f,width:d,height:g}=getComputedStyle(e);if(f!=="absolute"&&f!=="fixed"){var c=e.style;u={position:c.position,width:c.width,height:c.height,transform:c.transform},c.position="absolute",c.width=d,c.height=g;var p=e.getBoundingClientRect();if(a.left!==p.left||a.top!==p.top){var C=`translate(${a.left-p.left}px, ${a.top-p.top}px)`;c.transform=c.transform?`${c.transform} ${C}`:C}}}},unfix(){if(u){var f=e.style;f.position=u.position,f.width=u.width,f.height=u.height,f.transform=u.transform}}},v.a.element=e}function bt(e,t,r,o){var v=(e&dr)!==0,a=(e&vr)!==0,n=v&&a,l=(e&ur)!==0,u=n?"both":v?"in":"out",f,d=t.inert,g=t.style.overflow,c,p;function C(){return It(()=>f??=r()(t,o?.()??{},{direction:u}))}var S={is_global:l,in(){if(t.inert=d,!v){p?.abort(),p?.reset?.();return}a||c?.abort(),c=Ge(t,C(),p,1,()=>{qe(t,"introend"),c?.abort(),c=f=void 0,t.style.overflow=g})},out(E){if(!a){E?.(),f=void 0;return}t.inert=!0,p=Ge(t,C(),c,0,()=>{qe(t,"outroend"),E?.()})},stop:()=>{c?.abort(),p?.abort()}},i=Be;if((i.nodes.t??=[]).push(S),v&&Sr){var m=l;if(!m){for(var x=i.parent;x&&(x.f&At)!==0;)for(;(x=x.parent)&&(x.f&lr)===0;);m=!x||(x.f&fr)!==0}m&&st(()=>{Ve(()=>S.in())})}}function Ge(e,t,r,o,v){var a=o===1;if(cr(t)){var n,l=!1;return kt(()=>{if(!l){var i=t({direction:a?"in":"out"});n=Ge(e,i,r,o,v)}}),{abort:()=>{l=!0,n?.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(r?.deactivate(),!t?.duration&&!t?.delay)return qe(e,a?"introstart":"outrostart"),v(),{abort:Ie,deactivate:Ie,reset:Ie,t:()=>o};const{delay:u=0,css:f,tick:d,easing:g=Jr}=t;var c=[];if(a&&r===void 0&&(d&&d(0,1),f)){var p=pt(f(0,1));c.push(p,p)}var C=()=>1-o,S=e.animate(c,{duration:u,fill:"forwards"});return S.onfinish=()=>{S.cancel(),qe(e,a?"introstart":"outrostart");var i=r?.t()??1-o;r?.abort();var m=o-i,x=t.duration*Math.abs(m),E=[];if(x>0){var I=!1;if(f)for(var A=Math.ceil(x/16.666666666666668),N=0;N<=A;N+=1){var y=i+m*g(N/A),z=pt(f(y,1-y));E.push(z),I||=z.overflow==="hidden"}I&&(e.style.overflow="hidden"),C=()=>{var R=S.currentTime;return i+m*g(R/x)},d&&Vr(()=>{if(S.playState!=="running")return!1;var R=C();return d(R,1-R),!0})}S=e.animate(E,{duration:x,fill:"forwards"}),S.onfinish=()=>{C=()=>o,d?.(o,1-o),v()}},{abort:()=>{S&&(S.cancel(),S.effect=null,S.onfinish=Ie)},deactivate:()=>{v=Ie},reset:()=>{o===0&&d?.(1,0)},t:()=>C()}}function Pr(e,t,r,o,v,a){let n=D;D&&De();var l=null;D&&ce.nodeType===mr&&(l=ce,De());var u=D?ce:e,f=Be,d=new zt(u,!1);it(()=>{const g=t()||null;var c=g==="svg"?pr:void 0;if(g===null){d.ensure(null,null),Fe(!0);return}return d.ensure(g,p=>{if(g){if(l=D?l:_r(g,c),Dt(l,l),o){D&&Mr(g)&&l.append(document.createComment(""));var C=D?Ct(l):l.appendChild(He());D&&(C===null?Me(!1):Ce(C)),gt(f),o(l,C),gt(null)}Be.nodes.end=l,p.before(l)}D&&Ce(p)}),Fe(!0),()=>{g&&Fe(!1)}},At),hr(()=>{Fe(!0)}),n&&(Me(!0),Ce(u))}function wt(e,t,r){st(()=>{var o=Ve(()=>t(e,r?.())||{});if(r&&o?.update){var v=!1,a={};Nt(()=>{var n=r();gr(n),v&&br(a,n)&&(a=n,o.update(n))}),v=!0}if(o?.destroy)return()=>o.destroy()})}function We(e,t,r=t){var o=new WeakSet;wr(e,"input",async v=>{var a=v?e.defaultValue:e.value;if(a=et(e)?tt(a):a,r(a),we!==null&&o.add(we),await yr(),a!==(a=t())){var n=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=a??"",l!==null){var f=e.value.length;n===l&&l===u&&f>u?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=n,e.selectionEnd=Math.min(l,f))}}}),(D&&e.defaultValue!==e.value||Ve(t)==null&&e.value)&&(r(et(e)?tt(e.value):e.value),we!==null&&o.add(we)),Nt(()=>{var v=t();if(e===document.activeElement){var a=xr??we;if(o.has(a))return}et(e)&&v===tt(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function et(e){var t=e.type;return t==="number"||t==="range"}function tt(e){return e===""?null:+e}class ot{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(t){this.#r=t}observe(t,r){var o=this.#e.get(t)||new Set;return o.add(r),this.#e.set(t,o),this.#a().observe(t,this.#r),()=>{var v=this.#e.get(t);v.delete(r),v.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#a(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var r of t){ot.entries.set(r.target,r);for(var o of this.#e.get(r.target)||[])o(r)}}))}}var Yr=new ot({box:"border-box"});function yt(e,t,r){var o=Yr.observe(e,()=>r(e[t]));st(()=>(Ve(()=>r(e[t])),o))}function Xr(e){const t=e-1;return t*t*t+1}function Zr(e,{from:t,to:r},o={}){var{delay:v=0,duration:a=N=>Math.sqrt(N)*120,easing:n=Xr}=o,l=getComputedStyle(e),u=l.transform==="none"?"":l.transform,[f,d]=l.transformOrigin.split(" ").map(parseFloat);f/=e.clientWidth,d/=e.clientHeight;var g=Qr(e),c=e.clientWidth/r.width/g,p=e.clientHeight/r.height/g,C=t.left+t.width*f,S=t.top+t.height*d,i=r.left+r.width*f,m=r.top+r.height*d,x=(C-i)*c,E=(S-m)*p,I=t.width/r.width,A=t.height/r.height;return{delay:v,duration:typeof a=="function"?a(Math.sqrt(x*x+E*E)):a,easing:n,css:(N,y)=>{var z=y*x,R=y*E,k=N+y*I,$=N+y*A;return`transform: ${u} translate(${z}px, ${R}px) scale(${k}, ${$});`}}}function Qr(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}const $r=e=>e;function xt(e,{delay:t=0,duration:r=400,easing:o=$r}={}){const v=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:o,css:a=>`opacity: ${a*v}`}}var ea=re("<span> </span>"),ta=re("<div><!></div>"),ra=re("<span> </span>"),aa=re("<div><!></div>"),ia=re("<div><!></div>"),na=re("<!> <div></div>",1);function sa(e,t){Rt(t,!0);let r=L(t,"animate",3,!0),o=L(t,"balance",3,!0),v=L(t,"calcCols",3,(h,w,_)=>Math.min(t.items.length,Math.floor((h+_)/(w+_))||1)),a=L(t,"duration",3,200),n=L(t,"gap",3,20),l=L(t,"getId",3,h=>typeof h=="number"||typeof h=="string"?h:h[u()]),u=L(t,"idKey",19,()=>"id"),f=L(t,"masonryHeight",15,0),d=L(t,"masonryWidth",15,0),g=L(t,"maxColWidth",3,500),c=L(t,"minColWidth",3,330),p=L(t,"columnStyle",19,()=>""),C=L(t,"columnClass",19,()=>""),S=L(t,"div",15),i=L(t,"virtualize",3,!1),m=L(t,"getEstimatedHeight",3,void 0),x=L(t,"overscan",3,5),E=L(t,"height",3,void 0),I=Or(t,["$$slots","$$events","$$legacy","animate","balance","calcCols","duration","gap","getId","idKey","items","masonryHeight","masonryWidth","maxColWidth","minColWidth","columnStyle","columnClass","children","div","virtualize","getEstimatedHeight","overscan","height"]),A=Cr(new Map),N=ve(0),y=ve(0),z=M(()=>s(N)>0?s(y)/s(N):null);Er(()=>{const h=new Set(t.items.map(l()));let w=0;for(const[_,W]of A.entries())h.has(_)||(w+=W,A.delete(_));w>0&&(K(y,s(y)-w),K(N,A.size,!0))});const R=h=>{const w=l()(h),_=A.get(w);return _!==void 0?_:m()?m()(h):s(z)?s(z):150},k=(h,w)=>{if(!o()&&!i())return{};const _=new ResizeObserver(()=>{const W=h.offsetHeight;if(W>0&&A.get(w)!==W){const j=A.get(w)??0;K(y,s(y)+(W-j)),A.set(w,W),K(N,A.size,!0)}});return _.observe(h),{destroy:()=>_.disconnect()}};let $=M(()=>o()&&s(N)>=t.items.length);function oe(h){const w=Array.from({length:h},()=>[]),_=Array(h).fill(0);for(const[W,j]of t.items.entries()){const ie=_.indexOf(Math.min(..._));w[ie].push([j,W]),_[ie]+=R(j)+n()}return w}ct(()=>{g()<c()&&console.warn(`svelte-bricks: maxColWidth (${g()}) < minColWidth (${c()}).`)});let he=M(()=>v()(d()||1920,c(),n())),Ee=M(()=>Array.from({length:s(he)-1},(h,w)=>{const _=w+1,W=(c()+n())*(_+1)-n()-1;return`@container ${_===1?"":`(min-width: ${(c()+n())*_-n()}px) and `}(max-width: ${W}px) { .masonry > .col:nth-child(n+${_+1}) { display: none; } }`}).join(`
`)),me=M(()=>s($)?oe(s(he)):t.items.reduce((h,w,_)=>(h[_%s(he)].push([w,_]),h),Array.from({length:s(he)},()=>[]))),b=!1;ct(()=>{i()&&E()===void 0&&!b&&(b=!0,console.warn("svelte-bricks: virtualize=true requires a height prop. Falling back to 400px."))});function T(h,w){let _=0,W=h.length;for(;_<W;){const j=_+W>>>1;h[j]<w?_=j+1:W=j}return _}let O=M(()=>s(me).map(h=>{let w=0;return h.map(([_])=>(w+=R(_)+n(),w))})),F=M(()=>s(O).map(h=>h.at(-1)??0)),X=ve(0),P=!1;function _e(h){P||(P=!0,requestAnimationFrame(()=>{K(X,h.target.scrollTop,!0),P=!1}))}let Se=M(()=>typeof E()=="number"?E():f()||400),ae=M(()=>i()&&(typeof E()=="number"||f()>0)),pe=M(()=>s(ae)?s(O).map(h=>{const w=Math.max(0,T(h,s(X))-1-x()),_=Math.min(h.length,T(h,s(X)+s(Se))+x());return[w,_]}):s(me).map(h=>[0,h.length]));const Te=()=>s(me).map(()=>0);let ze=M(()=>s(ae)?s(pe).map(([h],w)=>h>0?s(O)[w][h-1]:0):Te()),je=M(()=>s(ae)?s(pe).map(([,h],w)=>{const _=h>0?s(O)[w][h-1]??0:0;return Math.max(0,s(F)[w]-_)}):Te()),Y=M(()=>r()&&!s(ae));var Z=na(),ge=ye(Z);Pr(ge,()=>"style",!1,(h,w)=>{var _=Bt();xe(()=>Ue(_,s(Ee))),q(w,_)});var Q=V(ge,2);Tr(Q,()=>({onscroll:i()?_e:void 0,style:"display: flex; width: 100%; justify-content: center; box-sizing: border-box",...I,class:`masonry ${t.class??""??""}`,[kr]:{gap:`${n()??""}px`,"overflow-y":i()?"auto":void 0,height:i()?typeof E()=="number"?`${E()}px`:E()??"400px":void 0}}),void 0,void 0,void 0,"svelte-1oxaop3"),$e(Q,21,()=>s(me),Ur,(h,w,_)=>{const W=M(()=>{const[ne,le]=s(pe)[_];return{start:ne,end:le}}),j=M(()=>s(w).slice(s(W).start,s(W).end));var ie=ia();let lt;var Wt=G(ie);{var Ht=ne=>{var le=Oe(),Je=ye(le);$e(Je,25,()=>s(j),([fe,ke])=>l()(fe),(fe,ke)=>{var Ae=M(()=>vt(s(ke),2));let ue=()=>s(Ae)[0],Ke=()=>s(Ae)[1];var J=ta(),Pe=G(J);{var Ye=H=>{var U=Oe(),de=ye(U);mt(de,()=>t.children,()=>({idx:Ke(),item:ue()})),q(H,U)},Xe=H=>{var U=ea(),de=G(U,!0);B(U),xe(()=>Ue(de,ue())),q(H,U)};Qe(Pe,H=>{t.children?H(Ye):H(Xe,!1)})}B(J),wt(J,(H,U)=>k?.(H,U),()=>l()(ue())),bt(1,J,()=>xt,()=>({delay:100,duration:a()})),bt(2,J,()=>xt,()=>({delay:0,duration:a()})),Kr(J,()=>Zr,()=>({duration:a()})),q(fe,J)}),q(ne,le)},Ut=ne=>{var le=Oe(),Je=ye(le);$e(Je,17,()=>s(j),([fe,ke])=>l()(fe),(fe,ke)=>{var Ae=M(()=>vt(s(ke),2));let ue=()=>s(Ae)[0],Ke=()=>s(Ae)[1];var J=aa(),Pe=G(J);{var Ye=H=>{var U=Oe(),de=ye(U);mt(de,()=>t.children,()=>({idx:Ke(),item:ue()})),q(H,U)},Xe=H=>{var U=ra(),de=G(U,!0);B(U),xe(()=>Ue(de,ue())),q(H,U)};Qe(Pe,H=>{t.children?H(Ye):H(Xe,!1)})}B(J),wt(J,(H,U)=>k?.(H,U),()=>l()(ue())),q(fe,J)}),q(ne,le)};Qe(Wt,ne=>{s(Y)?ne(Ht):ne(Ut,!1)})}B(ie),xe(()=>{Ar(ie,1,`col col-${_} ${C()??""}`,"svelte-1oxaop3"),lt=Ir(ie,p()||void 0,lt,{display:"grid",flex:"1 1 0","min-width":"0",gap:`${n()??""}px`,"max-width":`${g()??""}px`,"padding-top":s(ae)?`${s(ze)[_]}px`:void 0,"padding-bottom":s(ae)?`${s(je)[_]}px`:void 0})}),q(h,ie)}),B(Q),Ot(Q,h=>S(h),()=>S()),yt(Q,"clientWidth",d),yt(Q,"clientHeight",f),q(e,Z),Mt()}var oa=re('<video class="gif-video svelte-1m7wss9" loop="" playsinline="" disablepictureinpicture=""><source type="video/mp4"/></video>',2),la=re('<div class="gif-container svelte-1m7wss9"><!> <p class="svelte-1m7wss9"> </p> <div class="button-wrapper svelte-1m7wss9"><button class="copy-discord-button svelte-1m7wss9">Copy Discord URL</button> <button class="copy-button svelte-1m7wss9">Copy URL</button> <button class="close-button svelte-1m7wss9">X</button></div></div>'),fa=re('<!> <div id="controls" class="svelte-1m7wss9"><div id="data-button-container" class="svelte-1m7wss9"><button id="export-button" class="svelte-1m7wss9">Export GIFs</button> <button id="import-button" class="svelte-1m7wss9">Import GIFs</button></div> <div id="search" class="svelte-1m7wss9"><input type="text" placeholder="Search for a GIF..." id="search-input" class="svelte-1m7wss9"/></div> <br/> <div id="add" class="svelte-1m7wss9"><input type="text" placeholder="URL" id="add-input" class="svelte-1m7wss9"/> <input type="text" placeholder="Discord URL (optional)" id="add-discord-url-input" class="svelte-1m7wss9"/> <input type="text" placeholder="Tags (space separated)" id="add-tags-input" class="svelte-1m7wss9"/> <button id="add-button" class="svelte-1m7wss9">Add</button></div></div> <div id="video-container" class="svelte-1m7wss9"><!></div>',1);function ba(e,t){Rt(t,!0);const r=()=>Lr(a,"$gifsStore",o),[o,v]=Fr(),a=Gt([]);let n=ve(""),l=ve(""),u=ve(""),f=ve(""),d,g=M(()=>s(n).split(" ").map(b=>b.trim()).filter(b=>b!=="")),c=M(()=>r().filter(b=>s(g).every(T=>b.tags.some(O=>O.toLowerCase().includes(T.toLowerCase())))));function p(){if(s(l).trim()===""||s(f).trim()===""){alert("Please enter both URL and tags.");return}let b=s(f).split(" ").map(T=>T.trim()).filter(T=>T!=="");b.length!==0&&(a.update(T=>{const O={url:s(l).trim(),tags:b,discordUrl:s(u).trim()===""?s(l).trim():s(u).trim()};return[...T,O]}),K(l,""),K(f,""),K(u,""))}function C(){const b="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r())),T=document.createElement("a");T.setAttribute("href",b),T.setAttribute("download","gifs.json"),document.body.appendChild(T),T.click(),T.remove()}function S(b,T){const O=[...b];return T.forEach(F=>{O.some(X=>X.url===F.url&&X.discordUrl===F.discordUrl)||O.push(F)}),O}function i(){const b=document.createElement("input");b.type="file",b.accept="application/json",b.onchange=T=>{const O=T.target.files?.[0];if(!O)return;const F=new FileReader;F.onload=X=>{try{const P=JSON.parse(X.target?.result);a.update(_e=>S(_e,P))}catch(P){alert("Failed to import: "+P)}},F.readAsText(O)},b.click()}qt(()=>{const b=localStorage.getItem("gifs");b&&a.set(JSON.parse(b)),a.subscribe(T=>{localStorage.setItem("gifs",JSON.stringify(T))})});var m=fa(),x=ye(m);Nr(x,{});var E=V(x,2),I=G(E),A=G(I),N=V(A,2);B(I);var y=V(I,2),z=G(y);Le(z),B(y);var R=V(y,4),k=G(R);Le(k);var $=V(k,2);Le($);var oe=V($,2);Le(oe);var he=V(oe,2);B(R),B(E);var Ee=V(E,2),me=G(Ee);sa(me,{get items(){return s(c)},getId:T=>T.url,gap:12,id:"video-container",animate:!1,minColWidth:200,maxColWidth:1e3,children:(T,O)=>{let F=()=>O?.().item,X=()=>O?.().idx;var P=la(),_e=G(P);Hr(_e,()=>F().url,Y=>{var Z=oa();Z.muted=!0;var ge=G(Z);B(Z),xe(()=>Rr(ge,"src",F().url)),ht("mouseenter",Z,Q=>Q.currentTarget.play()),ht("mouseleave",Z,Q=>Q.currentTarget.pause()),q(Y,Z)});var Se=V(_e,2),ae=G(Se);B(Se);var pe=V(Se,2),Te=G(pe),ze=V(Te,2),je=V(ze,2);B(pe),B(P),xe(Y=>Ue(ae,`Tags: ${Y??""}`),[()=>F().tags.join(", ")]),be("click",Te,()=>{navigator.clipboard.writeText(F().discordUrl||F().url).then(()=>alert("Discord URL copied!")).catch(Y=>alert("Failed to copy: "+Y))}),be("click",ze,()=>{navigator.clipboard.writeText(F().url).then(()=>alert("URL copied!")).catch(Y=>alert("Failed to copy: "+Y))}),be("click",je,()=>{confirm(`Delete this GIF?
URL: ${F().url}
Discord URL: ${F().discordUrl}
Tags: ${F().tags.join(", ")}`)&&a.update(Y=>Y.filter((Z,ge)=>ge!==X()))}),q(T,P)},$$slots:{default:!0}}),B(Ee),Ot(Ee,b=>d=b,()=>d),be("click",A,C),be("click",N,i),We(z,()=>s(n),b=>K(n,b)),We(k,()=>s(l),b=>K(l,b)),We($,()=>s(u),b=>K(u,b)),We(oe,()=>s(f),b=>K(f,b)),be("click",he,p),q(e,m),Mt(),v()}zr(["click"]);export{ba as component};
