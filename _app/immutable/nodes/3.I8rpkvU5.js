import{b as Ut,a as q,f as te,t as Dt,c as Me}from"../chunks/oF93Wzcm.js";import{o as Bt,w as qt}from"../chunks/C33Q1jX1.js";import{k as D,I as He,b0 as Gt,b as it,i as Le,V as xe,a1 as Ct,C as s,ac as Kt,K as Vt,W as ft,a5 as Re,l as ce,J as jt,aa as Jt,U as ut,d as be,b1 as ee,j as rt,b2 as Pt,n as Yt,as as Xt,aP as Zt,a8 as nt,b3 as Qt,b4 as $t,ag as er,H as dt,b5 as tr,e as Et,h as St,b6 as Ze,b7 as rr,a7 as ar,g as ir,a3 as nr,b8 as Tt,y as kt,b9 as sr,x as Ue,E as At,ba as or,aH as lr,ad as st,F as qe,bb as fr,bc as ur,bd as dr,af as Ae,be as cr,z as It,A as vr,bf as hr,aD as mr,bg as _r,D as Nt,aA as pr,aC as gr,bh as br,aL as wr,bi as yr,p as Rt,al as xr,ax as Cr,ah as J,aw as ct,f as we,a as Mt,aM as ve,t as ye,s as K,r as B,aN as z,c as G,bj as vt}from"../chunks/kLHa-MXQ.js";import{a as Er,b as ze,s as We}from"../chunks/C5pnJeNa.js";import{B as zt}from"../chunks/Byn3yIQT.js";import{a as Sr,S as Tr,s as kr,b as Ar,T as Ir,r as Oe,c as Nr}from"../chunks/CxnQFhm_.js";import{g as Rr,c as Mr,d as ge,j as ht}from"../chunks/DzxQuzbj.js";import{p as L,b as zr,r as Or,i as Qe,s as Fr,a as Lr}from"../chunks/CfninqCR.js";import{s as mt}from"../chunks/D6Q5_SLk.js";const Wr=Symbol("NaN");function Hr(e,t,r){D&&He();var o=new zt(e),v=!Gt();it(()=>{var a=t();a!==a&&(a=Wr),v&&a!==null&&typeof a=="object"&&(a={}),o.ensure(a,r)})}function Ur(e,t){return t}function Dr(e,t,r){for(var o=[],v=t.length,a,n=t.length,l=0;l<v;l++){let g=t[l];St(g,()=>{if(a){if(a.pending.delete(g),a.done.add(g),a.pending.size===0){var c=e.outrogroups;at(nt(a.done)),c.delete(a),c.size===0&&(e.outrogroups=null)}}else n-=1},!1)}if(n===0){var u=o.length===0&&r!==null;if(u){var f=r,d=f.parentNode;ar(d),d.append(f),e.items.clear()}at(t,!u)}else a={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(a)}function at(e,t=!0){for(var r=0;r<e.length;r++)ir(e[r],t)}var _t;function $e(e,t,r,o,v,a=null){var n=e,l=new Map,u=(t&Tt)!==0;if(u){var f=e;n=D?xe(Ct(f)):f.appendChild(Le())}D&&He();var d=null,g=Xt(()=>{var m=r();return Zt(m)?m:m==null?[]:nt(m)}),c,p=!0;function C(){i.fallback=d,Br(i,c,n,t,o),d!==null&&(c.length===0?(d.f&ee)===0?Et(d):(d.f^=ee,Ne(d,null,n)):St(d,()=>{d=null}))}var T=it(()=>{c=s(g);var m=c.length;let y=!1;if(D){var E=Kt(n)===Vt;E!==(m===0)&&(n=ft(),xe(n),Re(!1),y=!0)}for(var R=new Set,N=be,k=Yt(),x=0;x<m;x+=1){D&&ce.nodeType===jt&&ce.data===Jt&&(n=ce,y=!0,Re(!1));var O=c[x],M=o(O,x),A=p?null:l.get(M);A?(A.v&&ut(A.v,O),A.i&&ut(A.i,x),k&&N.unskip_effect(A.e)):(A=qr(l,p?n:_t??=Le(),O,M,x,v,t,r),p||(A.e.f|=ee),l.set(M,A)),R.add(M)}if(m===0&&a&&!d&&(p?d=rt(()=>a(n)):(d=rt(()=>a(_t??=Le())),d.f|=ee)),m>R.size&&Pt(),D&&m>0&&xe(ft()),!p)if(k){for(const[X,Ce]of l)R.has(X)||N.skip_effect(Ce.e);N.oncommit(C),N.ondiscard(()=>{})}else C();y&&Re(!0),s(g)}),i={effect:T,items:l,outrogroups:null,fallback:d};p=!1,D&&(n=ce)}function Ie(e){for(;e!==null&&(e.f&rr)===0;)e=e.next;return e}function Br(e,t,r,o,v){var a=(o&sr)!==0,n=t.length,l=e.items,u=Ie(e.effect.first),f,d=null,g,c=[],p=[],C,T,i,m;if(a)for(m=0;m<n;m+=1)C=t[m],T=v(C,m),i=l.get(T).e,(i.f&ee)===0&&(i.nodes?.a?.measure(),(g??=new Set).add(i));for(m=0;m<n;m+=1){if(C=t[m],T=v(C,m),i=l.get(T).e,e.outrogroups!==null)for(const A of e.outrogroups)A.pending.delete(i),A.done.delete(i);if((i.f&ee)!==0)if(i.f^=ee,i===u)Ne(i,null,r);else{var y=d?d.next:u;i===e.effect.last&&(e.effect.last=i.prev),i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),se(e,d,i),se(e,i,y),Ne(i,y,r),d=i,c=[],p=[],u=Ie(d.next);continue}if((i.f&Ze)!==0&&(Et(i),a&&(i.nodes?.a?.unfix(),(g??=new Set).delete(i))),i!==u){if(f!==void 0&&f.has(i)){if(c.length<p.length){var E=p[0],R;d=E.prev;var N=c[0],k=c[c.length-1];for(R=0;R<c.length;R+=1)Ne(c[R],E,r);for(R=0;R<p.length;R+=1)f.delete(p[R]);se(e,N.prev,k.next),se(e,d,N),se(e,k,E),u=E,d=k,m-=1,c=[],p=[]}else f.delete(i),Ne(i,u,r),se(e,i.prev,i.next),se(e,i,d===null?e.effect.first:d.next),se(e,d,i),d=i;continue}for(c=[],p=[];u!==null&&u!==i;)(f??=new Set).add(u),p.push(u),u=Ie(u.next);if(u===null)continue}(i.f&ee)===0&&c.push(i),d=i,u=Ie(i.next)}if(e.outrogroups!==null){for(const A of e.outrogroups)A.pending.size===0&&(at(nt(A.done)),e.outrogroups?.delete(A));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||f!==void 0){var x=[];if(f!==void 0)for(i of f)(i.f&Ze)===0&&x.push(i);for(;u!==null;)(u.f&Ze)===0&&u!==e.fallback&&x.push(u),u=Ie(u.next);var O=x.length;if(O>0){var M=(o&Tt)!==0&&n===0?r:null;if(a){for(m=0;m<O;m+=1)x[m].nodes?.a?.measure();for(m=0;m<O;m+=1)x[m].nodes?.a?.fix()}Dr(e,x,M)}}a&&kt(()=>{if(g!==void 0)for(i of g)i.nodes?.a?.apply()})}function qr(e,t,r,o,v,a,n,l){var u=(n&Qt)!==0?(n&$t)===0?er(r,!1,!1):dt(r):null,f=(n&tr)!==0?dt(v):null;return{v:u,i:f,e:rt(()=>(a(t,u??r,f??v,l),()=>{e.delete(o)}))}}function Ne(e,t,r){if(e.nodes)for(var o=e.nodes.start,v=e.nodes.end,a=t&&(t.f&ee)===0?t.nodes.start:r;o!==null;){var n=nr(o);if(a.before(o),o===v)return;o=n}}function se(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const Gr=()=>performance.now(),$={tick:e=>requestAnimationFrame(e),now:()=>Gr(),tasks:new Set};function Ot(){const e=$.now();$.tasks.forEach(t=>{t.c(e)||($.tasks.delete(t),t.f())}),$.tasks.size!==0&&$.tick(Ot)}function Kr(e){let t;return $.tasks.size===0&&$.tick(Ot),{promise:new Promise(r=>{$.tasks.add(t={c:e,f:r})}),abort(){$.tasks.delete(t)}}}function De(e,t){It(()=>{e.dispatchEvent(new CustomEvent(t))})}function Vr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function pt(e){const t={},r=e.split(";");for(const o of r){const[v,a]=o.split(":");if(!v||a===void 0)break;const n=Vr(v.trim());t[n]=a.trim()}return t}const jr=e=>e;let Ft=null;function gt(e){Ft=e}function Jr(e,t,r){var o=Ft??Ue,v=o.nodes,a,n,l,u=null;v.a??={element:e,measure(){a=this.element.getBoundingClientRect()},apply(){if(l?.abort(),n=this.element.getBoundingClientRect(),a.left!==n.left||a.right!==n.right||a.top!==n.top||a.bottom!==n.bottom){const f=t()(this.element,{from:a,to:n},r?.());l=Be(this.element,f,void 0,1,()=>{l?.abort(),l=void 0})}},fix(){if(!e.getAnimations().length){var{position:f,width:d,height:g}=getComputedStyle(e);if(f!=="absolute"&&f!=="fixed"){var c=e.style;u={position:c.position,width:c.width,height:c.height,transform:c.transform},c.position="absolute",c.width=d,c.height=g;var p=e.getBoundingClientRect();if(a.left!==p.left||a.top!==p.top){var C=`translate(${a.left-p.left}px, ${a.top-p.top}px)`;c.transform=c.transform?`${c.transform} ${C}`:C}}}},unfix(){if(u){var f=e.style;f.position=u.position,f.width=u.width,f.height=u.height,f.transform=u.transform}}},v.a.element=e}function bt(e,t,r,o){var v=(e&ur)!==0,a=(e&cr)!==0,n=v&&a,l=(e&fr)!==0,u=n?"both":v?"in":"out",f,d=t.inert,g=t.style.overflow,c,p;function C(){return It(()=>f??=r()(t,o?.()??{},{direction:u}))}var T={is_global:l,in(){if(t.inert=d,!v){p?.abort(),p?.reset?.();return}a||c?.abort(),c=Be(t,C(),p,1,()=>{De(t,"introend"),c?.abort(),c=f=void 0,t.style.overflow=g})},out(E){if(!a){E?.(),f=void 0;return}t.inert=!0,p=Be(t,C(),c,0,()=>{De(t,"outroend"),E?.()})},stop:()=>{c?.abort(),p?.abort()}},i=Ue;if((i.nodes.t??=[]).push(T),v&&Er){var m=l;if(!m){for(var y=i.parent;y&&(y.f&At)!==0;)for(;(y=y.parent)&&(y.f&or)===0;);m=!y||(y.f&lr)!==0}m&&st(()=>{qe(()=>T.in())})}}function Be(e,t,r,o,v){var a=o===1;if(dr(t)){var n,l=!1;return kt(()=>{if(!l){var i=t({direction:a?"in":"out"});n=Be(e,i,r,o,v)}}),{abort:()=>{l=!0,n?.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(r?.deactivate(),!t?.duration&&!t?.delay)return De(e,a?"introstart":"outrostart"),v(),{abort:Ae,deactivate:Ae,reset:Ae,t:()=>o};const{delay:u=0,css:f,tick:d,easing:g=jr}=t;var c=[];if(a&&r===void 0&&(d&&d(0,1),f)){var p=pt(f(0,1));c.push(p,p)}var C=()=>1-o,T=e.animate(c,{duration:u,fill:"forwards"});return T.onfinish=()=>{T.cancel(),De(e,a?"introstart":"outrostart");var i=r?.t()??1-o;r?.abort();var m=o-i,y=t.duration*Math.abs(m),E=[];if(y>0){var R=!1;if(f)for(var N=Math.ceil(y/16.666666666666668),k=0;k<=N;k+=1){var x=i+m*g(k/N),O=pt(f(x,1-x));E.push(O),R||=O.overflow==="hidden"}R&&(e.style.overflow="hidden"),C=()=>{var M=T.currentTime;return i+m*g(M/y)},d&&Kr(()=>{if(T.playState!=="running")return!1;var M=C();return d(M,1-M),!0})}T=e.animate(E,{duration:y,fill:"forwards"}),T.onfinish=()=>{C=()=>o,d?.(o,1-o),v()}},{abort:()=>{T&&(T.cancel(),T.effect=null,T.onfinish=Ae)},deactivate:()=>{v=Ae},reset:()=>{o===0&&d?.(1,0)},t:()=>C()}}function Pr(e,t,r,o,v,a){let n=D;D&&He();var l=null;D&&ce.nodeType===hr&&(l=ce,He());var u=D?ce:e,f=Ue,d=new zt(u,!1);it(()=>{const g=t()||null;var c=g==="svg"?_r:void 0;if(g===null){d.ensure(null,null),ze(!0);return}return d.ensure(g,p=>{if(g){if(l=D?l:mr(g,c),Ut(l,l),o){D&&Rr(g)&&l.append(document.createComment(""));var C=D?Ct(l):l.appendChild(Le());D&&(C===null?Re(!1):xe(C)),gt(f),o(l,C),gt(null)}Ue.nodes.end=l,p.before(l)}D&&xe(p)}),ze(!0),()=>{g&&ze(!1)}},At),vr(()=>{ze(!0)}),n&&(Re(!0),xe(u))}function wt(e,t,r){st(()=>{var o=qe(()=>t(e,r?.())||{});if(r&&o?.update){var v=!1,a={};Nt(()=>{var n=r();pr(n),v&&gr(a,n)&&(a=n,o.update(n))}),v=!0}if(o?.destroy)return()=>o.destroy()})}function Fe(e,t,r=t){var o=new WeakSet;br(e,"input",async v=>{var a=v?e.defaultValue:e.value;if(a=et(e)?tt(a):a,r(a),be!==null&&o.add(be),await wr(),a!==(a=t())){var n=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=a??"",l!==null){var f=e.value.length;n===l&&l===u&&f>u?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=n,e.selectionEnd=Math.min(l,f))}}}),(D&&e.defaultValue!==e.value||qe(t)==null&&e.value)&&(r(et(e)?tt(e.value):e.value),be!==null&&o.add(be)),Nt(()=>{var v=t();if(e===document.activeElement){var a=yr??be;if(o.has(a))return}et(e)&&v===tt(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function et(e){var t=e.type;return t==="number"||t==="range"}function tt(e){return e===""?null:+e}class ot{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(t){this.#r=t}observe(t,r){var o=this.#e.get(t)||new Set;return o.add(r),this.#e.set(t,o),this.#a().observe(t,this.#r),()=>{var v=this.#e.get(t);v.delete(r),v.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#a(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var r of t){ot.entries.set(r.target,r);for(var o of this.#e.get(r.target)||[])o(r)}}))}}var Yr=new ot({box:"border-box"});function yt(e,t,r){var o=Yr.observe(e,()=>r(e[t]));st(()=>(qe(()=>r(e[t])),o))}function Xr(e){const t=e-1;return t*t*t+1}function Zr(e,{from:t,to:r},o={}){var{delay:v=0,duration:a=k=>Math.sqrt(k)*120,easing:n=Xr}=o,l=getComputedStyle(e),u=l.transform==="none"?"":l.transform,[f,d]=l.transformOrigin.split(" ").map(parseFloat);f/=e.clientWidth,d/=e.clientHeight;var g=Qr(e),c=e.clientWidth/r.width/g,p=e.clientHeight/r.height/g,C=t.left+t.width*f,T=t.top+t.height*d,i=r.left+r.width*f,m=r.top+r.height*d,y=(C-i)*c,E=(T-m)*p,R=t.width/r.width,N=t.height/r.height;return{delay:v,duration:typeof a=="function"?a(Math.sqrt(y*y+E*E)):a,easing:n,css:(k,x)=>{var O=x*y,M=x*E,A=k+x*R,X=k+x*N;return`transform: ${u} translate(${O}px, ${M}px) scale(${A}, ${X});`}}}function Qr(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}const $r=e=>e;function xt(e,{delay:t=0,duration:r=400,easing:o=$r}={}){const v=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:o,css:a=>`opacity: ${a*v}`}}var ea=te("<span> </span>"),ta=te("<div><!></div>"),ra=te("<span> </span>"),aa=te("<div><!></div>"),ia=te("<div><!></div>"),na=te("<!> <div></div>",1);function sa(e,t){Rt(t,!0);let r=L(t,"animate",3,!0),o=L(t,"balance",3,!0),v=L(t,"calcCols",3,(h,w,_)=>Math.min(t.items.length,Math.floor((h+_)/(w+_))||1)),a=L(t,"duration",3,200),n=L(t,"gap",3,20),l=L(t,"getId",3,h=>typeof h=="number"||typeof h=="string"?h:h[u()]),u=L(t,"idKey",19,()=>"id"),f=L(t,"masonryHeight",15,0),d=L(t,"masonryWidth",15,0),g=L(t,"maxColWidth",3,500),c=L(t,"minColWidth",3,330),p=L(t,"columnStyle",19,()=>""),C=L(t,"columnClass",19,()=>""),T=L(t,"div",15),i=L(t,"virtualize",3,!1),m=L(t,"getEstimatedHeight",3,void 0),y=L(t,"overscan",3,5),E=L(t,"height",3,void 0),R=Or(t,["$$slots","$$events","$$legacy","animate","balance","calcCols","duration","gap","getId","idKey","items","masonryHeight","masonryWidth","maxColWidth","minColWidth","columnStyle","columnClass","children","div","virtualize","getEstimatedHeight","overscan","height"]),N=xr(new Map),k=ve(0),x=ve(0),O=z(()=>s(k)>0?s(x)/s(k):null);Cr(()=>{const h=new Set(t.items.map(l()));let w=0;for(const[_,W]of N.entries())h.has(_)||(w+=W,N.delete(_));w>0&&(J(x,s(x)-w),J(k,N.size,!0))});const M=h=>{const w=l()(h),_=N.get(w);return _!==void 0?_:m()?m()(h):s(O)?s(O):150},A=(h,w)=>{if(!o()&&!i())return{};const _=new ResizeObserver(()=>{const W=h.offsetHeight;if(W>0&&N.get(w)!==W){const V=N.get(w)??0;J(x,s(x)+(W-V)),N.set(w,W),J(k,N.size,!0)}});return _.observe(h),{destroy:()=>_.disconnect()}};let X=z(()=>o()&&s(k)>=t.items.length);function Ce(h){const w=Array.from({length:h},()=>[]),_=Array(h).fill(0);for(const[W,V]of t.items.entries()){const ie=_.indexOf(Math.min(..._));w[ie].push([V,W]),_[ie]+=M(V)+n()}return w}ct(()=>{g()<c()&&console.warn(`svelte-bricks: maxColWidth (${g()}) < minColWidth (${c()}).`)});let oe=z(()=>v()(d()||1920,c(),n())),Ge=z(()=>Array.from({length:s(oe)-1},(h,w)=>{const _=w+1,W=(c()+n())*(_+1)-n()-1;return`@container ${_===1?"":`(min-width: ${(c()+n())*_-n()}px) and `}(max-width: ${W}px) { .masonry > .col:nth-child(n+${_+1}) { display: none; } }`}).join(`
`)),b=z(()=>s(X)?Ce(s(oe)):t.items.reduce((h,w,_)=>(h[_%s(oe)].push([w,_]),h),Array.from({length:s(oe)},()=>[]))),S=!1;ct(()=>{i()&&E()===void 0&&!S&&(S=!0,console.warn("svelte-bricks: virtualize=true requires a height prop. Falling back to 400px."))});function F(h,w){let _=0,W=h.length;for(;_<W;){const V=_+W>>>1;h[V]<w?_=V+1:W=V}return _}let I=z(()=>s(b).map(h=>{let w=0;return h.map(([_])=>(w+=M(_)+n(),w))})),re=z(()=>s(I).map(h=>h.at(-1)??0)),P=ve(0),ae=!1;function Ee(h){ae||(ae=!0,requestAnimationFrame(()=>{J(P,h.target.scrollTop,!0),ae=!1}))}let Ke=z(()=>typeof E()=="number"?E():f()||400),Z=z(()=>i()&&(typeof E()=="number"||f()>0)),he=z(()=>s(Z)?s(I).map(h=>{const w=Math.max(0,F(h,s(P))-1-y()),_=Math.min(h.length,F(h,s(P)+s(Ke))+y());return[w,_]}):s(b).map(h=>[0,h.length]));const Se=()=>s(b).map(()=>0);let Ve=z(()=>s(Z)?s(he).map(([h],w)=>h>0?s(I)[w][h-1]:0):Se()),Y=z(()=>s(Z)?s(he).map(([,h],w)=>{const _=h>0?s(I)[w][h-1]??0:0;return Math.max(0,s(re)[w]-_)}):Se()),Q=z(()=>r()&&!s(Z));var me=na(),_e=we(me);Pr(_e,()=>"style",!1,(h,w)=>{var _=Dt();ye(()=>We(_,s(Ge))),q(w,_)});var pe=K(_e,2);Sr(pe,()=>({onscroll:i()?Ee:void 0,style:"display: flex; width: 100%; justify-content: center; box-sizing: border-box",...R,class:`masonry ${t.class??""??""}`,[Tr]:{gap:`${n()??""}px`,"overflow-y":i()?"auto":void 0,height:i()?typeof E()=="number"?`${E()}px`:E()??"400px":void 0}}),void 0,void 0,void 0,"svelte-1oxaop3"),$e(pe,21,()=>s(b),Ur,(h,w,_)=>{const W=z(()=>{const[ne,le]=s(he)[_];return{start:ne,end:le}}),V=z(()=>s(w).slice(s(W).start,s(W).end));var ie=ia();let lt;var Lt=G(ie);{var Wt=ne=>{var le=Me(),je=we(le);$e(je,25,()=>s(V),([fe,Te])=>l()(fe),(fe,Te)=>{var ke=z(()=>vt(s(Te),2));let ue=()=>s(ke)[0],Je=()=>s(ke)[1];var j=ta(),Pe=G(j);{var Ye=H=>{var U=Me(),de=we(U);mt(de,()=>t.children,()=>({idx:Je(),item:ue()})),q(H,U)},Xe=H=>{var U=ea(),de=G(U,!0);B(U),ye(()=>We(de,ue())),q(H,U)};Qe(Pe,H=>{t.children?H(Ye):H(Xe,!1)})}B(j),wt(j,(H,U)=>A?.(H,U),()=>l()(ue())),bt(1,j,()=>xt,()=>({delay:100,duration:a()})),bt(2,j,()=>xt,()=>({delay:0,duration:a()})),Jr(j,()=>Zr,()=>({duration:a()})),q(fe,j)}),q(ne,le)},Ht=ne=>{var le=Me(),je=we(le);$e(je,17,()=>s(V),([fe,Te])=>l()(fe),(fe,Te)=>{var ke=z(()=>vt(s(Te),2));let ue=()=>s(ke)[0],Je=()=>s(ke)[1];var j=aa(),Pe=G(j);{var Ye=H=>{var U=Me(),de=we(U);mt(de,()=>t.children,()=>({idx:Je(),item:ue()})),q(H,U)},Xe=H=>{var U=ra(),de=G(U,!0);B(U),ye(()=>We(de,ue())),q(H,U)};Qe(Pe,H=>{t.children?H(Ye):H(Xe,!1)})}B(j),wt(j,(H,U)=>A?.(H,U),()=>l()(ue())),q(fe,j)}),q(ne,le)};Qe(Lt,ne=>{s(Q)?ne(Wt):ne(Ht,!1)})}B(ie),ye(()=>{kr(ie,1,`col col-${_} ${C()??""}`,"svelte-1oxaop3"),lt=Ar(ie,p()||void 0,lt,{display:"grid",flex:"1 1 0","min-width":"0",gap:`${n()??""}px`,"max-width":`${g()??""}px`,"padding-top":s(Z)?`${s(Ve)[_]}px`:void 0,"padding-bottom":s(Z)?`${s(Y)[_]}px`:void 0})}),q(h,ie)}),B(pe),zr(pe,h=>T(h),()=>T()),yt(pe,"clientWidth",d),yt(pe,"clientHeight",f),q(e,me),Mt()}var oa=te('<video class="gif-video svelte-1m7wss9" loop="" playsinline="" disablepictureinpicture=""><source type="video/mp4"/></video>',2),la=te('<div class="gif-container svelte-1m7wss9"><!> <p class="svelte-1m7wss9"> </p> <div class="button-wrapper svelte-1m7wss9"><button class="copy-discord-button svelte-1m7wss9">Copy Discord URL</button> <button class="copy-button svelte-1m7wss9">Copy URL</button> <button class="close-button svelte-1m7wss9">X</button></div></div>'),fa=te('<!> <div id="controls" class="svelte-1m7wss9"><div id="data-button-container" class="svelte-1m7wss9"><button id="export-button" class="svelte-1m7wss9">Export GIFs</button> <button id="import-button" class="svelte-1m7wss9">Import GIFs</button></div> <div id="search" class="svelte-1m7wss9"><input type="text" placeholder="Search for a GIF..." id="search-input" class="svelte-1m7wss9"/></div> <br/> <div id="add" class="svelte-1m7wss9"><input type="text" placeholder="URL" id="add-input" class="svelte-1m7wss9"/> <input type="text" placeholder="Discord URL (optional)" id="add-discord-url-input" class="svelte-1m7wss9"/> <input type="text" placeholder="Tags (space separated)" id="add-tags-input" class="svelte-1m7wss9"/> <button id="add-button" class="svelte-1m7wss9">Add</button></div></div> <div id="video-container" class="svelte-1m7wss9"><!></div>',1);function ba(e,t){Rt(t,!0);const r=()=>Lr(a,"$gifsStore",o),[o,v]=Fr(),a=qt([]);let n=ve(""),l=ve(""),u=ve(""),f=ve(""),d=z(()=>s(n).split(" ").map(b=>b.trim()).filter(b=>b!=="")),g=z(()=>r().filter(b=>s(d).every(S=>b.tags.some(F=>F.toLowerCase().includes(S.toLowerCase())))).map((b,S)=>({...b,id:S})));function c(){if(s(l).trim()===""||s(f).trim()===""){alert("Please enter both URL and tags.");return}let b=s(f).split(" ").map(S=>S.trim()).filter(S=>S!=="");b.length!==0&&(a.update(S=>{const F={url:s(l).trim(),tags:b,discordUrl:s(u).trim()===""?s(l).trim():s(u).trim()};return[...S,F]}),J(l,""),J(f,""),J(u,""))}function p(){const b="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r())),S=document.createElement("a");S.setAttribute("href",b),S.setAttribute("download","gifs.json"),document.body.appendChild(S),S.click(),S.remove()}function C(b,S){const F=[...b];return S.forEach(I=>{F.some(re=>re.url===I.url&&re.discordUrl===I.discordUrl)||F.push(I)}),F}function T(){const b=document.createElement("input");b.type="file",b.accept="application/json",b.onchange=S=>{const F=S.target.files?.[0];if(!F)return;const I=new FileReader;I.onload=re=>{try{const P=JSON.parse(re.target?.result);a.update(ae=>C(ae,P))}catch(P){alert("Failed to import: "+P)}},I.readAsText(F)},b.click()}Bt(()=>{const b=localStorage.getItem("gifs");b&&a.set(JSON.parse(b)),a.subscribe(S=>{localStorage.setItem("gifs",JSON.stringify(S))})});var i=fa(),m=we(i);Ir(m,{});var y=K(m,2),E=G(y),R=G(E),N=K(R,2);B(E);var k=K(E,2),x=G(k);Oe(x),B(k);var O=K(k,4),M=G(O);Oe(M);var A=K(M,2);Oe(A);var X=K(A,2);Oe(X);var Ce=K(X,2);B(O),B(y);var oe=K(y,2),Ge=G(oe);sa(Ge,{get items(){return s(g)},idKey:"id",gap:12,id:"video-container",animate:!1,minColWidth:200,maxColWidth:1e3,order:"column-balanced",calcCols:(S,F,I)=>Math.min(s(g).length,5,Math.floor((S+I)/(F+I))||1),children:(S,F)=>{let I=()=>F?.().item,re=()=>F?.().idx;var P=la(),ae=G(P);Hr(ae,()=>I().url,Y=>{var Q=oa();Q.muted=!0;var me=G(Q);B(Q),ye(()=>Nr(me,"src",I().url)),ht("mouseenter",Q,_e=>_e.currentTarget.play()),ht("mouseleave",Q,_e=>_e.currentTarget.pause()),q(Y,Q)});var Ee=K(ae,2),Ke=G(Ee);B(Ee);var Z=K(Ee,2),he=G(Z),Se=K(he,2),Ve=K(Se,2);B(Z),B(P),ye(Y=>We(Ke,`Tags: ${Y??""}`),[()=>I().tags.join(", ")]),ge("click",he,()=>{navigator.clipboard.writeText(I().discordUrl||I().url).then(()=>alert("Discord URL copied!")).catch(Y=>alert("Failed to copy: "+Y))}),ge("click",Se,()=>{navigator.clipboard.writeText(I().url).then(()=>alert("URL copied!")).catch(Y=>alert("Failed to copy: "+Y))}),ge("click",Ve,()=>{confirm(`Delete this GIF?
URL: ${I().url}
Discord URL: ${I().discordUrl}
Tags: ${I().tags.join(", ")}`)&&a.update(Y=>Y.filter((Q,me)=>me!==re()))}),q(S,P)},$$slots:{default:!0}}),B(oe),ge("click",R,p),ge("click",N,T),Fe(x,()=>s(n),b=>J(n,b)),Fe(M,()=>s(l),b=>J(l,b)),Fe(A,()=>s(u),b=>J(u,b)),Fe(X,()=>s(f),b=>J(f,b)),ge("click",Ce,c),q(e,i),Mt(),v()}Mr(["click"]);export{ba as component};
